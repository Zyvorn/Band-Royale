// Translation data
const translations = {
    en: {
        storeName: "Band Royale",
        home: "Home",
        shop: "Shop",
        collections: "Collections",
        men: "Men",
        women: "Women",
        accessories: "Accessories",
        about: "About",
        contact: "Contact",
        sliderTitle1: "Elevate Your Style with Premium Band Apparel",
        sliderText1: "Experience unparalleled craftsmanship and exclusive designs that redefine luxury streetwear.",
        discoverBtn: "Discover Collection",
        sliderTitle2: "Limited Edition Collaborations",
        sliderText2: "Exclusive partnerships with renowned artists and designers for truly unique pieces.",
        viewCollabBtn: "View Collaborations",
        sliderTitle3: "Handcrafted Excellence",
        sliderText3: "Each garment is meticulously crafted with premium materials and attention to detail.",
        craftsmanshipBtn: "Explore Craftsmanship",
        newArrivals: "New Arrivals",
        arrivalsSub: "Discover our latest premium band apparel collection",
        newBadge: "New",
        category1: "Men's Jacket",
        productTitle1: "Vintage Rocker Leather Jacket",
        productDesc1: "Premium lambskin leather with custom band embroidery",
        limitedBadge: "Limited",
        category2: "Women's Top",
        productTitle2: "Silk Rock Concert Blouse",
        productDesc2: "Hand-painted silk with exclusive band artwork",
        exclusiveBadge: "Exclusive",
        category3: "Unisex",
        productTitle3: "Signature Band Hoodie",
        productDesc3: "Heavyweight organic cotton with gold detailing",
        bestSeller: "Best Seller",
        category4: "Men's Shirt",
        productTitle4: "Classic Band Denim Shirt",
        productDesc4: "Japanese selvedge denim with custom hardware",
        addToCart: "Add to Cart",
        whyTitle: "Why Band Royale",
        whySub: "Experience the difference of premium craftsmanship",
        benefitTitle1: "Artisanal Craftsmanship",
        benefitText1: "Each garment is meticulously crafted by skilled artisans using traditional techniques and premium materials.",
        benefitTitle2: "Sustainable Luxury",
        benefitText2: "Ethically sourced materials and responsible production processes without compromising on quality.",
        benefitTitle3: "Exclusive Designs",
        benefitText3: "Limited edition collections created in collaboration with renowned artists and designers.",
        newsletterTitle: "Join Our Exclusive Community",
        newsletterText: "Subscribe to our newsletter for early access to new collections, private events, and special promotions.",
        subscribeBtn: "Subscribe",
        aboutTitle: "About Band Royale",
        aboutText: "Premium online fashion store offering modern, high-quality clothing. Discover elegant designs that combine style, value, and timeless appeal.",
        collectionsTitle: "Collections",
        limitedEditions: "Limited Editions",
        customerCare: "Customer Care",
        contactUs: "Contact Us",
        shippingInfo: "Shipping Information",
        returns: "Returns & Exchanges",
        sizeGuide: "Size Guide",
        faqs: "FAQs",
        legalTitle: "Legal",
        terms: "Terms & Conditions",
        privacy: "Privacy Policy",
        imprint: "Imprint",
        cookie: "Cookie Consent",
        sustainability: "Sustainability Policy",
        rightsReserved: "All rights reserved. Premium band clothing and accessories.",
        yourCart: "Your Cart",
        emptyCart: "Your cart is currently empty",
        continueShopping: "Continue Shopping",
        total: "Total:",
        checkout: "Proceed to Checkout",
        remove: "Remove"
    },
    de: {
        storeName: "Band Royale",
        home: "Startseite",
        shop: "Shop",
        collections: "Kollektionen",
        men: "Herren",
        women: "Damen",
        accessories: "Accessoires",
        about: "Über uns",
        contact: "Kontakt",
        sliderTitle1: "Veredeln Sie Ihren Stil mit Premium Band-Bekleidung",
        sliderText1: "Erleben Sie unvergleichliches Handwerk und exklusive Designs, die Luxus-Streetwear neu definieren.",
        discoverBtn: "Kollektion entdecken",
        sliderTitle2: "Limitierte Editionen",
        sliderText2: "Exklusive Partnerschaften mit renommierten Künstlern und Designern für einzigartige Stücke.",
        viewCollabBtn: "Kollaborationen ansehen",
        sliderTitle3: "Handgefertigte Exzellenz",
        sliderText3: "Jedes Kleidungsstück wird sorgfältig aus hochwertigen Materialien und mit Liebe zum Detail gefertigt.",
        craftsmanshipBtn: "Handwerk entdecken",
        newArrivals: "Neuheiten",
        arrivalsSub: "Entdecken Sie unsere neueste Premium Band-Bekleidungskollektion",
        newBadge: "Neu",
        category1: "Herrenjacke",
        productTitle1: "Vintage Rocker Lederjacke",
        productDesc1: "Hochwertiges Lammleder mit maßgeschneiderter Band-Stickerei",
        limitedBadge: "Limitiert",
        category2: "Damenbluse",
        productTitle2: "Seiden-Konzertbluse",
        productDesc2: "Handbemalte Seide mit exklusiven Band-Motiven",
        exclusiveBadge: "Exklusiv",
        category3: "Unisex",
        productTitle3: "Signature Band Hoodie",
        productDesc3: "Schweres Bio-Baumwollgewebe mit Golddetails",
        bestSeller: "Bestseller",
        category4: "Herrenhemd",
        productTitle4: "Klassisches Band-Denimhemd",
        productDesc4: "Japanisches Selvedge Denim mit maßgefertigten Beschlägen",
        addToCart: "In den Warenkorb",
        whyTitle: "Warum Band Royale",
        whySub: "Erleben Sie den Unterschied von Premium-Handwerk",
        benefitTitle1: "Handwerkliche Meisterschaft",
        benefitText1: "Jedes Kleidungsstück wird von erfahrenen Handwerkern mit traditionellen Techniken und hochwertigen Materialien gefertigt.",
        benefitTitle2: "Nachhaltiger Luxus",
        benefitText2: "Ethisch beschaffte Materialien und verantwortungsbewusste Produktionsprozesse ohne Kompromisse bei der Qualität.",
        benefitTitle3: "Exklusive Designs",
        benefitText3: "Limitierte Kollektionen in Zusammenarbeit mit renommierten Künstlern und Designern.",
        newsletterTitle: "Werden Sie Teil unserer exklusiven Community",
        newsletterText: "Abonnieren Sie unseren Newsletter für frühen Zugang zu neuen Kollektionen, exklusiven Events und Sonderangeboten.",
        subscribeBtn: "Abonnieren",
        aboutTitle: "Über Band Royale",
        aboutText: "Exklusiver Online-Mode-Shop mit moderner, hochwertiger Kleidung. Entdecken Sie elegante Designs, die Stil, Wert und zeitlose Eleganz vereinen.",
        collectionsTitle: "Kollektionen",
        limitedEditions: "Limitierte Editionen",
        customerCare: "Kundenservice",
        contactUs: "Kontaktieren Sie uns",
        shippingInfo: "Versandinformationen",
        returns: "Rückgabe & Umtausch",
        sizeGuide: "Größentabelle",
        faqs: "Häufige Fragen",
        legalTitle: "Rechtliches",
        terms: "Allgemeine Geschäftsbedingungen",
        privacy: "Datenschutzrichtlinie",
        imprint: "Impressum",
        cookie: "Cookie-Zustimmung",
        sustainability: "Nachhaltigkeitspolitik",
        rightsReserved: "Alle Rechte vorbehalten. Premium Band-Bekleidung und Accessoires.",
        yourCart: "Ihr Warenkorb",
        emptyCart: "Ihr Warenkorb ist derzeit leer",
        continueShopping: "Weiter einkaufen",
        total: "Gesamt:",
        checkout: "Zur Kasse gehen",
        remove: "Entfernen"
    }
};

// DOM Elements
const mobileToggle = document.getElementById('mobileToggle');
const navLinks = document.querySelector('.nav-links');
const translateElements = document.querySelectorAll('[data-translate]');
const cartIcon = document.getElementById('cartIcon');
const cartOverlay = document.getElementById('cartOverlay');
const cartSidebar = document.getElementById('cartSidebar');
const closeCart = document.getElementById('closeCart');
const cartItems = document.getElementById('cartItems');
const cartTotal = document.getElementById('cartTotal');
const checkoutBtn = document.getElementById('checkoutBtn');
const addToCartButtons = document.querySelectorAll('.add-to-cart');
const cartCount = document.querySelector('.cart-count');
const langBtn = document.querySelector(".lang-btn");
const langMenu = document.querySelector(".lang-menu");
const langOptionElements = document.querySelectorAll(".lang-option");

// Current language and cart
let currentLanguage = "en";
let cart = [];

// Products data
const products = {
    1: { title: "Vintage Rocker Leather Jacket", price: 499, category: "Men's Jacket", image: "https://images.unsplash.com/photo-1551028719-00167b16eac5?auto=format&fit=crop&w=600" },
    2: { title: "Silk Rock Concert Blouse", price: 349, category: "Women's Top", image: "https://images.unsplash.com/photo-1576566588028-4147f3842f27?auto=format&fit=crop&w=600" },
    3: { title: "Signature Band Hoodie", price: 279, category: "Unisex", image: "https://images.unsplash.com/photo-1525811902-f2342640856e?auto=format&fit=crop&w=600" },
    4: { title: "Classic Band Denim Shirt", price: 399, category: "Men's Shirt", image: "https://images.unsplash.com/photo-1598032895397-b9472444bf93?auto=format&fit=crop&w=600" }
};

// =============
// Language Functions
// =============
function updateLanguage() {
    translateElements.forEach(element => {
        const key = element.dataset.translate;
        if (translations[currentLanguage][key]) {
            element.textContent = translations[currentLanguage][key];
        }
    });
}

function saveLanguage() {
    localStorage.setItem("language", currentLanguage);
}

function loadLanguage() {
    const lang = localStorage.getItem("language");
    if (lang && (lang === "en" || lang === "de")) {
        currentLanguage = lang;
    }
}

function highlightActiveLanguage() {
    langOptionElements.forEach(option => {
        if (option.dataset.lang === currentLanguage) {
            option.classList.add("active");
        } else {
            option.classList.remove("active");
        }
    });
}

// Language menu toggle
langBtn.addEventListener("click", function (e) {
    e.stopPropagation();
    langMenu.classList.toggle("active");
});

// Change language
langOptionElements.forEach(option => {
    option.addEventListener("click", function () {
        const lang = this.dataset.lang;
        if (lang !== currentLanguage) {
            currentLanguage = lang;
            updateLanguage();
            saveLanguage();
            highlightActiveLanguage();
        }
        langMenu.classList.remove("active");
    });
});

// Close menu when clicking outside
document.addEventListener("click", function (e) {
    if (!e.target.closest(".language-switcher")) {
        langMenu.classList.remove("active");
    }
});

// =============
// Mobile Navigation
// =============
mobileToggle.addEventListener("click", () => {
    navLinks.classList.toggle("active");
    const icon = mobileToggle.querySelector("i");
    if (navLinks.classList.contains("active")) {
        icon.classList.remove("fa-bars");
        icon.classList.add("fa-times");
    } else {
        icon.classList.remove("fa-times");
        icon.classList.add("fa-bars");
    }
});

// =============
// Slider
// =============
const slides = document.querySelectorAll(".slide");
const dots = document.querySelectorAll(".slider-dot");
let currentSlide = 0;
let slideInterval;

function showSlide(index) {
    slides.forEach(slide => slide.classList.remove("active"));
    dots.forEach(dot => dot.classList.remove("active"));

    slides[index].classList.add("active");
    dots[index].classList.add("active");
    currentSlide = index;
}

dots.forEach((dot, index) => {
    dot.addEventListener("click", () => {
        showSlide(index);
        clearInterval(slideInterval);
        startSlider();
    });
});

function nextSlide() {
    let next = currentSlide + 1;
    if (next >= slides.length) next = 0;
    showSlide(next);
}

function startSlider() {
    clearInterval(slideInterval);
    slideInterval = setInterval(nextSlide, 5000);
}

// =============
// Shopping Cart
// =============
function updateCart() {
    cartCount.textContent = cart.reduce((total, item) => total + item.quantity, 0);

    if (cart.length === 0) {
        cartItems.innerHTML = `
            <div class="cart-empty">
                <i class="fas fa-shopping-bag"></i>
                <p data-translate="emptyCart">${translations[currentLanguage].emptyCart}</p>
                <a href="#" class="btn" id="continueShopping" data-translate="continueShopping">${translations[currentLanguage].continueShopping}</a>
            </div>
        `;
        cartTotal.style.display = "none";
        checkoutBtn.style.display = "none";

        document.getElementById("continueShopping")?.addEventListener("click", (e) => {
            e.preventDefault();
            cartOverlay.classList.remove("active");
            cartSidebar.classList.remove("active");
            document.body.style.overflow = "";
        });
    } else {
        cartItems.innerHTML = "";
        cart.forEach((item, index) => {
            const product = products[item.id];
            cartItems.innerHTML += `
                <div class="cart-item">
                    <div class="cart-item-img" style="background-image: url('${product.image}')"></div>
                    <div class="cart-item-details">
                        <div class="cart-item-title">${product.title}</div>
                        <div class="cart-item-price">€${product.price.toFixed(2)} × ${item.quantity}</div>
                        <button class="cart-item-remove" data-index="${index}" data-translate="remove">${translations[currentLanguage].remove}</button>
                    </div>
                </div>
            `;
        });

        const total = cart.reduce((sum, item) => sum + (products[item.id].price * item.quantity), 0);

        cartTotal.innerHTML = `
            <span data-translate="total">${translations[currentLanguage].total}</span>
            <span id="totalAmount">€${total.toFixed(2)}</span>
        `;

        cartTotal.style.display = "flex";
        checkoutBtn.style.display = "block";

        document.querySelectorAll(".cart-item-remove").forEach(button => {
            button.addEventListener("click", (e) => {
                const index = e.target.dataset.index;
                cart.splice(index, 1);
                updateCart();
                saveCart();
            });
        });
    }

    updateLanguage();
}

function saveCart() {
    localStorage.setItem("cart", JSON.stringify(cart));
}

function loadCart() {
    const savedCart = localStorage.getItem("cart");
    if (savedCart) {
        cart = JSON.parse(savedCart);
        updateCart();
    }
}

// Add to cart buttons
addToCartButtons.forEach(button => {
    button.addEventListener("click", (e) => {
        e.preventDefault();
        const productId = e.target.dataset.product;

        const existingItem = cart.find(item => item.id === productId);

        if (existingItem) {
            existingItem.quantity += 1;
        } else {
            cart.push({ id: productId, quantity: 1 });
        }

        updateCart();
        saveCart();

        cartOverlay.classList.add("active");
        cartSidebar.classList.add("active");
        document.body.style.overflow = "hidden";
    });
});

// Open/close cart
cartIcon.addEventListener("click", (e) => {
    e.preventDefault();
    cartOverlay.classList.add("active");
    cartSidebar.classList.add("active");
    document.body.style.overflow = "hidden";
});

closeCart.addEventListener("click", () => {
    cartOverlay.classList.remove("active");
    cartSidebar.classList.remove("active");
    document.body.style.overflow = "";
});

cartOverlay.addEventListener("click", () => {
    cartOverlay.classList.remove("active");
    cartSidebar.classList.remove("active");
    document.body.style.overflow = "";
});

checkoutBtn.addEventListener("click", () => {
    alert(translations[currentLanguage].checkout + " - " + translations[currentLanguage].yourCart);
});

// Newsletter
const newsletterForm = document.querySelector(".newsletter-form");
newsletterForm.addEventListener("submit", (e) => {
    e.preventDefault();
    const email = newsletterForm.querySelector("input").value;
    alert(translations[currentLanguage].subscribeBtn + " - " + translations[currentLanguage].newsletterText);
    newsletterForm.reset();
});

// Close mobile menu when clicking on a link
document.querySelectorAll(".nav-links a").forEach(link => {
    link.addEventListener("click", () => {
        navLinks.classList.remove("active");
        mobileToggle.querySelector("i").classList.add("fa-bars");
        mobileToggle.querySelector("i").classList.remove("fa-times");
    });
});

// =============
// Initialize
// =============
function initApp() {
    loadLanguage();
    updateLanguage();
    highlightActiveLanguage();
    loadCart();
    startSlider();
}

document.addEventListener("DOMContentLoaded", initApp);